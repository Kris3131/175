## 詳細功能流程

### 1. 用戶管理

#### 1.1 註冊流程

1. 用戶查看註冊頁面並填寫註冊表單（用戶名、電子郵件、密碼等）。
2. 後端驗證：
   - 檢查用戶名和電子郵件是否已被使用
   - 驗證密碼複雜度
   - 檢查其他必要資訊
3. 如果驗證通過，後端將用戶資訊加密存儲到資料庫。
4. 註冊確認郵件並發送到用戶的電子郵件地址。
5. 返回註冊成功。

#### 1.2 登入流程

1. 用戶進入登入頁面，並輸入必要資訊（用戶名/電子郵件和密碼）。
2. 後端驗證用戶資訊：
   - 檢查用戶是否存在
   - 驗證密碼是否正確
3. 如果驗證成功，後端生成 JWT（JSON Web Token）。
4. 後端將 JWT 返回給前端。
5. 之後的 API 請求都將包含此 JWT 以進行身份驗證。

### 2. 寵物管理

#### 2.1 新增寵物流程

1. 已登入用戶進入「新增寵物」頁面。
2. 用戶填寫寵物訊息表單（名字、品種、年齡、特徵等）。
3. 用戶可以上傳寵物照片。
4. 前端將數據（包括照片）發送到後端 API。
5. 後端進行詳細的資料驗證。
6. 後端處理並存儲上傳的照片（可能涉及調整大小、生成縮略圖等）。
7. 後端將寵物訊息存儲到資料庫，建立與用戶的關聯。
8. 返回成功消息給前端，包括新增寵物的 ID。
9. 前端顯示成功消息，並可能重定向到寵物詳情頁面。

#### 2.2 更新寵物信息流程

1. 用戶訪問寵物詳情頁面，選擇「編輯」選項。
2. 前端顯示現有的寵物資訊到表單中。
3. 用戶修改需要更新的訊息。
4. 前端將更新請求發送到後端 API，包括寵物 ID 和更新的訊息。
5. 後端驗證用戶是否有權限更新該寵物訊息。
6. 後端驗證更新的資料。
7. 後端將更新應用到資料庫。
8. 返回成功訊息給前端。

### 3. 公園資訊管理

#### 3.1 新增公園流程

1. 授權用戶（可能是管理員）查看「新增公園」頁面。
2. 用戶填寫公園訊息（名稱、地址、設施、開放時間等）。
3. 用戶可以在地圖上標記公園位置。
4. 用戶可以上傳公園照片。
5. 前端驗證輸入的數據。
6. 後端驗證數據並檢查用戶權限。
7. 後端處理地理位置數據，與 Google Maps API 。
8. 後端將公園信息存儲到資料庫。
9. 返回成功消息給前端，包括新增公園的 ID。

#### 3.2 公園評價流程

1. 已登入用戶查看特定公園的頁面。
2. 用戶選擇「新增評價」選項。
3. 用戶填寫評價表單（星級、評論內容、照片等）。
4. 前端將評價數據發送到後端 API。
5. 後端驗證用戶是否有權限添加評價（例如，可能需要之前訪問過該公園）。
6. 後端將評價訊息存儲到資料庫，建立與公園和用戶的關聯。
7. 後端更新公園的整體評分。
8. 返回成功訊息。

### 4. 狗狗聚會（活動管理）

#### 4.1 創建活動流程

1. 已登入用戶進入「創建活動」頁面。
2. 用戶填寫活動詳情（標題、描述、日期、時間、地點、參與人數限制等）。
3. 用戶可以選擇關聯的公園（如果活動在特定寵物公園舉行）。
4. 後端進行詳細驗證，包括檢查日期有效性、地點可用性等。
5. 後端將活動訊息存儲到資料庫。
6. 如果活動與特定公園關聯，建立相應的關聯。
7. 返回成功包括新創建活動的 ID。

#### 4.2 活動報名流程

1. 用戶瀏覽活動列表或地圖上的活動標記。
2. 用戶選擇感興趣的活動並訪問詳情頁面。
3. 報名活動需要是用戶已登入狀態。
4. 前端發送報名請求到後端 API。
5. 後端檢查：
   - 用戶是否已報名此活動
   - 活動是否還有剩餘名額
   - 用戶的寵物是否符合活動要求（如果有）
6. 如果檢查通過，後端在資料庫中記錄用戶的報名資訊。
7. 後端更新活動的當前參與人數。
8. 返回成功訊息，用戶已報名，可能顯示活動詳情（如集合地點、注意事項等）。

### 5. 走失通報

#### 5.1 發布走失通報流程

1. 已登入用戶查看「發布走失通報」頁面。
2. 用戶填寫走失寵物訊息（選擇已登記的寵物或填寫新的描述）。
3. 用戶提供走失的具體訊息（時間、地點、最後見到的情況等）。
4. 用戶可以上傳最近的寵物照片。
5. 用戶在地圖上標記走失位置。
6. 後端驗證數據並處理地理位置訊息。
7. 後端將走失通報訊息存儲到資料庫。
8. 後端啟動通知流程：
   - 向附近的用戶發送通知
   - 更新公共走失寵物列表
9. 返回成功訊息給前端，包括通報 ID。

### 6. Google Maps 整合

#### 6.1 顯示公園位置流程

1. 用戶查看「附近公園」頁面或主頁地圖視圖。
2. 前端將用戶位置發送到後端 API，請求附近的公園數據。
3. 後端查詢資料庫，檢索指定範圍內的公園信息。
4. 後端將公園數據返回給前端。
5. 前端使用 Google Maps API 在地圖上顯示這些公園的位置。
6. 用戶可以點擊地圖上的標記查看公園詳情。

#### 6.2 顯示走失地點流程

1. 用戶查看「走失寵物地圖」頁面。
2. 前端請求最近的走失通報數據。
3. 後端查詢資料庫，最近的走失通報信息。
4. 後端將走失通報資訊返回給前端。
5. 前端使用 Google Maps API 在地圖上標記這些走失地點。
6. 用戶可以點擊地圖上的標記查看走失寵物的詳細信息。
7. 地圖可能會顯示不同的顏色或圖標來表示不同的走失時間或狀態。

### 7. 協尋功能

#### 7.1 獲取協尋資訊流程

1. 用戶查看「協尋」頁面。
2. 用戶可以輸入搜索條件（如寵物類型、走失時間範圍、地區等）。
3. 前端將搜索請求發送到後端 API。
4. 後端首先搜索內部資料庫中的走失通報。
5. 後端然後調用第三方 API（如 data.gov.tw）獲取額外的協尋資訊。
6. 後端整合來自內部和外部的數據。
7. 後端將整合後的協尋資訊返回給前端。
8. 前端以列表或地圖形式展示協尋資訊。
9. 用戶可以查看詳細信息，並可能有提供線索或聯繫失主的選項。

## 專案架構

175/
├── gateway/
│ ├── src/
│ │ ├── main.ts
│ │ └── app.module.ts
│ └── package.json
├── user-service/
│ ├── src/
│ │ ├── main.ts
│ │ ├── app.module.ts
│ │ ├── user/
│ │ │ ├── user.controller.ts
│ │ │ ├── user.service.ts
│ │ │ └── user.entity.ts
│ │ └── auth/
│ │ ├── auth.controller.ts
│ │ └── auth.service.ts
│ └── package.json
├── pet-service/
│ ├── src/
│ │ ├── main.ts
│ │ ├── app.module.ts
│ │ └── pet/
│ │ ├── pet.controller.ts
│ │ ├── pet.service.ts
│ │ └── pet.entity.ts
│ └── package.json
├── park-service/
│ ├── src/
│ │ ├── main.ts
│ │ ├── app.module.ts
│ │ └── park/
│ │ ├── park.controller.ts
│ │ ├── park.service.ts
│ │ └── park.entity.ts
│ └── package.json
├── event-service/
│ ├── src/
│ │ ├── main.ts
│ │ ├── app.module.ts
│ │ └── event/
│ │ ├── event.controller.ts
│ │ ├── event.service.ts
│ │ └── event.entity.ts
│ └── package.json
├── lost-pet-service/
│ ├── src/
│ │ ├── main.ts
│ │ ├── app.module.ts
│ │ └── lost-pet/
│ │ ├── lost-pet.controller.ts
│ │ ├── lost-pet.service.ts
│ │ └── lost-pet.entity.ts
│ └── package.json
├── docker-compose.yml
└── README.md
